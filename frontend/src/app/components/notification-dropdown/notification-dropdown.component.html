<li class="nav-item" ngbDropdown placement="bottom-right">
  <a class="nav-link" role="button" ngbDropdownToggle id="notification-bell">
    <i class="ni ni-bell-55"></i>
    <span class="badge badge-danger notification-badge" *ngIf="unreadCount > 0">
      {{ unreadCount > 99 ? '99+' : unreadCount }}
    </span>
  </a>
  
  <div class="dropdown-menu dropdown-menu-xl dropdown-menu-right py-0 overflow-hidden" ngbDropdownMenu>
    <!-- Header -->
    <div class="px-3 py-3 bg-gradient-primary text-white">
      <h6 class="text-sm text-white mb-0">
        Notificaciones 
        <span class="badge badge-light ml-2" *ngIf="unreadCount > 0">
          {{ unreadCount }} nuevas
        </span>
      </h6>
    </div>

    <!-- Lista de notificaciones -->
    <div class="list-group list-group-flush notification-list">
      <ng-container *ngIf="notifications.length > 0; else noNotifications">
        <a 
          *ngFor="let notification of notifications.slice(0, 5)" 
          class="list-group-item list-group-item-action"
          [class.unread]="!notification.read"
          (click)="markAsRead(notification.id)"
          [routerLink]="notification.orderId ? ['/admin/orders/update', notification.orderId] : null"
        >
          <div class="row align-items-center">
            <div class="col-auto">
              <span 
                class="notification-icon"
                [ngClass]="{
                  'bg-info': notification.type === 'info',
                  'bg-success': notification.type === 'success',
                  'bg-warning': notification.type === 'warning',
                  'bg-danger': notification.type === 'danger'
                }"
              >
                <i class="ni ni-delivery-fast"></i>
              </span>
            </div>
            <div class="col ml--2">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <h4 class="mb-0 text-sm">{{ notification.title }}</h4>
                </div>
                <div class="text-right text-muted">
                  <small>{{ notification.timestamp | date:'short' }}</small>
                </div>
              </div>
              <p class="text-sm mb-0">{{ notification.message }}</p>
            </div>
          </div>
        </a>
      </ng-container>

      <ng-template #noNotifications>
        <div class="text-center py-4 text-muted">
          <i class="ni ni-bell-55 text-muted" style="font-size: 2rem;"></i>
          <p class="mb-0 mt-2">No hay notificaciones</p>
        </div>
      </ng-template>
    </div>

    <!-- Footer -->
    <div class="dropdown-divider m-0" *ngIf="notifications.length > 0"></div>
    <div class="px-3 py-2 text-center" *ngIf="notifications.length > 0">
      <button 
        class="btn btn-sm btn-link text-primary" 
        (click)="markAllAsRead()"
        *ngIf="unreadCount > 0"
      >
        Marcar todas como le√≠das
      </button>
      <button 
        class="btn btn-sm btn-link text-danger ml-2" 
        (click)="clearAll()"
      >
        Limpiar todas
      </button>
    </div>
  </div>
</li>